/* style.css */

/* Define base variables (Defaulting to Light Theme) */
:root {
  --app-bg-color: #ffffff;
  --app-text-color: #212529;
  --app-muted-text-color: #6c757d;
  --app-border-color: #dee2e6;
  --app-primary-color: #0d6efd; /* Bootstrap Blue */
  --app-primary-text-color: #ffffff;
  --app-secondary-color: #6c757d; /* Bootstrap Gray */
  --app-secondary-text-color: #ffffff;
  --app-info-color: #0dcaf0;     /* Bootstrap Cyan */
  --app-info-text-color: #000000;
  --app-success-color: #198754; /* Bootstrap Green */
  --app-success-text-color: #ffffff;
  --app-danger-color: #dc3545; /* Bootstrap Red */
  --app-danger-text-color: #ffffff;
  --app-link-color: #0d6efd;
  --task-item-bg: #ffffff;
  --task-item-border: #dee2e6;
  --task-completed-text-color: #6c757d;
  --task-completed-bg-color: #f8f9fa;
  --input-bg: #ffffff;
  --input-border: #ced4da;
  --input-text: #495057;
  --modal-bg: #ffffff;
  --modal-header-border: #dee2e6;
  --modal-footer-border: #dee2e6;
  --theme-transition-duration: 0.3s;
}

/* --- Theme Overrides --- */

/* Dark Theme Overrides */
html[data-theme="dark"] {
  --app-bg-color: #212529;
  --app-text-color: #dee2e6;
  --app-muted-text-color: #adb5bd;
  --app-border-color: #495057;
  --app-link-color: #6ea8fe;
  --task-item-bg: #343a40;
  --task-item-border: #495057;
  --task-completed-text-color: #6c757d;
  --task-completed-bg-color: #2b3035;
  --input-bg: #343a40;
  --input-border: #6c757d;
  --input-text: #dee2e6;
  --modal-bg: #2b3035;
  --modal-header-border: #495057;
  --modal-footer-border: #495057;
  color-scheme: dark;
}

/* Forest Theme Overrides (Dark Based) */
html[data-theme="forest"] {
  --app-bg-color: #2f3e2a; --app-text-color: #e8e4d9; --app-muted-text-color: #a0a8a2; --app-border-color: #53634f;
  --app-primary-color: #8fbc8f; --app-primary-text-color: #1a2417; --app-secondary-color: #a0522d; --app-secondary-text-color: #e8e4d9;
  --app-info-color: #add8e6; --app-info-text-color: #1a2417; --app-success-color: #90ee90; --app-success-text-color: #1a2417;
  --app-danger-color: #cd5c5c; --app-danger-text-color: #ffffff; --app-link-color: #98fb98;
  --task-item-bg: #3e4f3a; --task-item-border: #53634f; --task-completed-text-color: #8f9e8b; --task-completed-bg-color: #2a3a26;
  --input-bg: #3e4f3a; --input-border: #53634f; --input-text: #e8e4d9; --modal-bg: #2a3a26; --modal-header-border: #53634f; --modal-footer-border: #53634f;
  color-scheme: dark;
}

/* Ocean Theme Overrides (Light Based) */
html[data-theme="ocean"] {
  --app-bg-color: #e0f7fa; --app-text-color: #004d40; --app-muted-text-color: #4db6ac; --app-border-color: #b2ebf2;
  --app-primary-color: #00796b; --app-primary-text-color: #ffffff; --app-secondary-color: #fdd835; --app-secondary-text-color: #3e2723;
  --app-info-color: #29b6f6; --app-info-text-color: #000000; --app-success-color: #4caf50; --app-success-text-color: #ffffff;
  --app-danger-color: #e57373; --app-danger-text-color: #ffffff; --app-link-color: #006064;
  --task-item-bg: #ffffff; --task-item-border: #b2ebf2; --task-completed-text-color: #757575; --task-completed-bg-color: #eeeeee;
  --input-bg: #ffffff; --input-border: #80deea; --input-text: #004d40; --modal-bg: #ffffff; --modal-header-border: #b2ebf2; --modal-footer-border: #b2ebf2;
  color-scheme: light;
}

/* --- Base Element Styling --- */

body {
  background-color: var(--app-bg-color);
  color: var(--app-text-color);
  transition: background-color var(--theme-transition-duration) ease, color var(--theme-transition-duration) ease;
}

a {
  color: var(--app-link-color);
  transition: color var(--theme-transition-duration) ease;
}

/* --- Task List Styling --- */

/* Style for individual list items, using theme variables */
.list-group-item { /* Defined ONCE */
  background-color: var(--task-item-bg);
  border-color: var(--task-item-border);
  color: var(--app-text-color);
  transition: background-color var(--theme-transition-duration) ease,
             border-color var(--theme-transition-duration) ease,
             color var(--theme-transition-duration) ease;
}

/* Styles specific to task items */
.task-item { /* Defined ONCE */
  /* Spacing between items */
  margin-bottom: 0.5rem;
  /* Spacing between content and buttons */
  gap: 1rem;
  /* Optional: rounded corners */
  /* border-radius: 0.375rem; */
}

/* Remove margin from the very last task item */
.task-item:last-child {
  margin-bottom: 0;
}

/* Target the inner container for checkbox-to-text gap */
.task-content-container { /* Defined ONCE */
  gap: 0.5rem;
}

/* Styles for completed tasks */
.task-completed .task-text {
  text-decoration: line-through;
  color: var(--task-completed-text-color);
  transition: color var(--theme-transition-duration) ease;
}
.list-group-item.task-completed {
  background-color: var(--task-completed-bg-color);
}

/* Styles for the "Empty State" message */
#noTasksMessage { /* Defined ONCE */
  background-color: var(--task-item-bg);
  border: 1px dashed var(--app-border-color);
  transition: background-color var(--theme-transition-duration) ease,
              border-color var(--theme-transition-duration) ease;
  opacity: 0.85;
}
#noTasksMessage i.bi-card-checklist {
  font-size: 4rem;
  color: var(--app-secondary-color);
  transition: color var(--theme-transition-duration) ease;
}
#noTasksMessage h5 {
 color: var(--app-text-color);
 font-weight: 500;
 transition: color var(--theme-transition-duration) ease;
}
#noTasksMessage p.text-muted {
 transition: color var(--theme-transition-duration) ease;
 font-size: 0.95rem;
}

/* Optional: Rounded corners for single item state */
/* .list-group:not(:empty) > .task-item:only-child { border-radius: 0.375rem; } */

/* --- Form Control Styling --- */

.form-control {
  background-color: var(--input-bg);
  border-color: var(--input-border);
  color: var(--input-text);
  transition: background-color var(--theme-transition-duration) ease,
              border-color var(--theme-transition-duration) ease,
              color var(--theme-transition-duration) ease;
}
.form-control::placeholder {
 color: var(--app-muted-text-color);
 opacity: 0.8;
}

/* --- Button Styling --- */

/* Override Bootstrap button variables using our theme variables */
.btn-primary { /* Simplified overrides, add hover/active if needed */
  --bs-btn-bg: var(--app-primary-color);
  --bs-btn-border-color: var(--app-primary-color);
  --bs-btn-color: var(--app-primary-text-color);
  /* Add hover/active overrides using color-mix if desired, like before */
  transition: background-color var(--theme-transition-duration) ease, border-color var(--theme-transition-duration) ease, color var(--theme-transition-duration) ease;
}
.btn-success {
  --bs-btn-bg: var(--app-success-color); --bs-btn-border-color: var(--app-success-color); --bs-btn-color: var(--app-success-text-color);
  transition: background-color var(--theme-transition-duration) ease, border-color var(--theme-transition-duration) ease, color var(--theme-transition-duration) ease;
}
.btn-danger {
  --bs-btn-bg: var(--app-danger-color); --bs-btn-border-color: var(--app-danger-color); --bs-btn-color: var(--app-danger-text-color);
  transition: background-color var(--theme-transition-duration) ease, border-color var(--theme-transition-duration) ease, color var(--theme-transition-duration) ease;
}
.btn-info {
  --bs-btn-bg: var(--app-info-color); --bs-btn-border-color: var(--app-info-color); --bs-btn-color: var(--app-info-text-color);
  transition: background-color var(--theme-transition-duration) ease, border-color var(--theme-transition-duration) ease, color var(--theme-transition-duration) ease;
}
.btn-secondary {
  --bs-btn-bg: var(--app-secondary-color); --bs-btn-border-color: var(--app-secondary-color); --bs-btn-color: var(--app-secondary-text-color);
  transition: background-color var(--theme-transition-duration) ease, border-color var(--theme-transition-duration) ease, color var(--theme-transition-duration) ease;
}
.btn-outline-secondary { /* For Theme button */
  --bs-btn-color: var(--app-secondary-color); --bs-btn-border-color: var(--app-secondary-color); --bs-btn-hover-bg: var(--app-secondary-color); --bs-btn-hover-color: var(--app-secondary-text-color);
  transition: background-color var(--theme-transition-duration) ease, border-color var(--theme-transition-duration) ease, color var(--theme-transition-duration) ease;
}
.btn-outline-info { /* For Ask AI */
  --bs-btn-color: var(--app-info-color); --bs-btn-border-color: var(--app-info-color); --bs-btn-hover-bg: var(--app-info-color); --bs-btn-hover-color: var(--app-info-text-color);
  transition: background-color var(--theme-transition-duration) ease, border-color var(--theme-transition-duration) ease, color var(--theme-transition-duration) ease;
}
.btn-outline-danger { /* For Delete */
  --bs-btn-color: var(--app-danger-color); --bs-btn-border-color: var(--app-danger-color); --bs-btn-hover-bg: var(--app-danger-color); --bs-btn-hover-color: var(--app-danger-text-color);
  transition: background-color var(--theme-transition-duration) ease, border-color var(--theme-transition-duration) ease, color var(--theme-transition-duration) ease;
}

/* --- Modal Styling --- */

.modal-content {
 background-color: var(--modal-bg);
 color: var(--app-text-color);
 border: 1px solid var(--app-border-color);
 transition: background-color var(--theme-transition-duration) ease, border-color var(--theme-transition-duration) ease, color var(--theme-transition-duration) ease;
}
.modal-header {
 border-bottom: 1px solid var(--modal-header-border);
 transition: border-color var(--theme-transition-duration) ease;
}
.modal-footer {
 border-top: 1px solid var(--modal-footer-border);
 transition: border-color var(--theme-transition-duration) ease;
}

/* Make close button visible on dark themes (Bootstrap 5.3+ handles this well with color-scheme) */
/* Let's rely on color-scheme and Bootstrap's default handling for now. */
/* We only add this if the default doesn't work well: */
/*
html[data-theme="dark"] .btn-close,
html[data-theme="forest"] .btn-close {
    filter: invert(1) grayscale(100%) brightness(200%);
}
*/


/* --- Animations --- */

@keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
.task-fade-in { animation: fadeIn 0.4s ease-in-out; }

@keyframes fadeOut { from { opacity: 1; transform: scale(1); } to { opacity: 0; transform: scale(0.95); } }
.task-fade-out { animation: fadeOut 0.4s ease-in-out; }

/* --- Utility Styling (e.g., Text Muted) --- */

.text-muted {
  color: var(--app-muted-text-color) !important; /* Override Bootstrap if necessary */
  transition: color var(--theme-transition-duration) ease;
}